<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Observed training outcomes archive — Documented cases from applied fitness systems work.">
  <title>Observed Outcomes — Kayleigh Gomez</title>
  
  <!-- Google Fonts: Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  
  <!-- Stylesheet -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- ========== Header / Navigation ========== -->
  <header class="header">
    <nav class="nav container">
      <a href="index.html" class="nav__link">Home</a>
      <a href="work.html" class="nav__link">Work</a>
      <!-- <a href="shop.html" class="nav__link">Shop</a> -->
      <a href="about.html" class="nav__link">About</a>
      <a href="outcomes.html" class="nav__link nav__link--active">Outcomes</a>
    </nav>
  </header>

  <!-- ========== Main Content ========== -->
  <main class="main">
    <div class="outcomes-page">

      <!-- Page Header -->
      <header class="outcomes-header">
        <h1 class="outcomes-header__title">Observed Training Outcomes</h1>
        <p class="outcomes-header__subtitle">
          Archive View — Client-Shared Cases (2022–2025)
        </p>
      </header>

      <!-- Framing Block -->
      <section class="outcomes-framing">
        <p>
          This archive presents selected examples from women who participated in structured online training programs I’ve designed and coached.

The cases are shared to illustrate how different training systems are experienced over time, with a focus on consistency, adaptation, and real-world application.

Each entry reflects an individual training context and highlights broader patterns observed across online coaching environments.
      </section>

      <!-- Filters -->
      <div class="outcomes-filters">
        <div class="filter-group">
          <label class="filter-label">System Focus</label>
          <div class="filter-options">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="strength">Strength</button>
            <button class="filter-btn" data-filter="consistency">Consistency</button>
            <button class="filter-btn" data-filter="cycle-aware">Cycle-Aware</button>
            <button class="filter-btn" data-filter="hybrid">Hybrid</button>
          </div>
        </div>
        <div class="filter-group">
          <label class="filter-label">Duration</label>
          <div class="filter-options">
            <button class="filter-btn active" data-filter-duration="all">All</button>
            <button class="filter-btn" data-filter-duration="8-12">8-12 weeks</button>
            <button class="filter-btn" data-filter-duration="12-16">12-16 weeks</button>
            <button class="filter-btn" data-filter-duration="16+">16+ weeks</button>
          </div>
        </div>
        <div class="filter-group filter-group--tags">
          <label class="filter-label">Filter by Tags</label>
          <div class="active-tags-container" id="activeTagsContainer">
            <span class="no-tags-message">Click tags in case modals to filter</span>
          </div>
        </div>
      </div>

      <!-- Case Grid -->
      <div class="outcomes-grid" id="casesGrid">
        <!-- Cases will be populated by JavaScript -->
      </div>

      <!-- Consent Disclaimer -->
      <div class="outcomes-consent">
        <p>All individuals shown have provided consent for their images and anonymized training details to be shared.</p>
      </div>

    </div>
  </main>

  <!-- Case Detail Modal -->
  <div class="case-modal" id="caseModal">
    <div class="case-modal__overlay"></div>
    <div class="case-modal__content">
      <button class="case-modal__close" aria-label="Close">&times;</button>
      <div class="case-modal__body" id="modalBody">
        <!-- Content populated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- ========== Footer ========== -->
  <footer class="footer">
    <div class="container">
      <p class="footer__copyright">&copy; 2025 Kayleigh Gomez</p>
      <p class="footer__disclaimer">Educational content only. This is not medical advice.</p>
    </div>
  </footer>

  <!-- ========== Case Data & Scripts ========== -->
  <script type="module">
    // Import case data from case-loader
    import { getAllCases } from './cases/case-loader.js';
    
    // Get all consented cases and transform to display format
    const allCasesData = getAllCases();
    const cases = allCasesData.map(c => ({
      id: c.id,
      slug: c.slug,
      focus: c.metadata.systemFocus,
      duration: c.metadata.durationWeeks,
      ageRange: c.metadata.ageRange,
      trainingFrequency: c.metadata.trainingFrequency,
      programPhase: c.metadata.programPhase,
      // Support both old and new data formats
      constraints: c.constraints,
      changes: c.observedChanges,
      contextConstraints: c.contextConstraints,
      outcomes: c.outcomes,
      performance: c.performance,
      programNotes: c.programNotes,
      background: c.background,
      tags: c.tags || [],
      beforeImage: c.images.before,
      afterImage: c.images.after
    }));

    // Extract all unique tags for filtering
    const allTags = [...new Set(cases.flatMap(c => c.tags))].sort();

    // Filter state
    let activeFilters = {
      focus: 'all',
      duration: 'all',
      searchTags: []
    };

    // Render cases
    function renderCases() {
      const grid = document.getElementById('casesGrid');
      const filtered = cases.filter(c => {
        const focusMatch = activeFilters.focus === 'all' || c.focus === activeFilters.focus;
        const durationMatch = activeFilters.duration === 'all' || 
          (activeFilters.duration === '8-12' && c.duration >= 8 && c.duration <= 12) ||
          (activeFilters.duration === '12-16' && c.duration > 12 && c.duration <= 16) ||
          (activeFilters.duration === '16+' && c.duration > 16);
        const tagMatch = activeFilters.searchTags.length === 0 || 
          activeFilters.searchTags.every(tag => c.tags.includes(tag));
        return focusMatch && durationMatch && tagMatch;
      });

      grid.innerHTML = filtered.map(c => `
        <article class="case-card" data-case-id="${c.id}">
          <div class="case-card__images">
            <img src="${c.beforeImage}" alt="Before" loading="lazy">
            <img src="${c.afterImage}" alt="After" loading="lazy">
          </div>
          <div class="case-card__meta">
            <div class="case-card__id">${c.id}</div>
            <div class="case-card__details">
              <span>${c.duration} weeks</span>
              <span>${c.focus.replace('-', ' ')}</span>
              <span>Age ${c.ageRange}</span>
            </div>
          </div>
        </article>
      `).join('');

      // Add click handlers
      document.querySelectorAll('.case-card').forEach(card => {
        card.addEventListener('click', () => {
          const caseId = card.dataset.caseId;
          openModal(caseId);
        });
      });
    }

    // Open modal
    function openModal(caseId) {
      const caseData = cases.find(c => c.id === caseId);
      const modal = document.getElementById('caseModal');
      const body = document.getElementById('modalBody');

      // Build metadata section with optional fields
      let metadataHTML = `
        <div class="metadata-item">
          <span class="metadata-label">Duration</span>
          <span class="metadata-value">${caseData.duration} weeks</span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label">System Focus</span>
          <span class="metadata-value">${caseData.focus.replace('-', ' ')}</span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label">Age Range</span>
          <span class="metadata-value">${caseData.ageRange}</span>
        </div>
      `;
      
      if (caseData.trainingFrequency) {
        metadataHTML += `
          <div class="metadata-item">
            <span class="metadata-label">Frequency</span>
            <span class="metadata-value">${caseData.trainingFrequency}</span>
          </div>
        `;
      }
      
      if (caseData.programPhase) {
        metadataHTML += `
          <div class="metadata-item">
            <span class="metadata-label">Phase</span>
            <span class="metadata-value">${caseData.programPhase}</span>
          </div>
        `;
      }

      // Context & Constraints section (new format or fallback to old)
      let contextHTML = '';
      if (caseData.contextConstraints) {
        contextHTML = `
          <div class="case-detail__section">
            <h3>Context & Constraints</h3>
            <div class="case-data-grid">
              ${caseData.contextConstraints.trainingAvailability ? `
                <div class="data-row">
                  <span class="data-label">Training availability:</span>
                  <span class="data-value">${caseData.contextConstraints.trainingAvailability}</span>
                </div>
              ` : ''}
              ${caseData.contextConstraints.equipmentAccess ? `
                <div class="data-row">
                  <span class="data-label">Equipment:</span>
                  <span class="data-value">${caseData.contextConstraints.equipmentAccess}</span>
                </div>
              ` : ''}
              ${caseData.contextConstraints.recoveryCapacity ? `
                <div class="data-row">
                  <span class="data-label">Recovery:</span>
                  <span class="data-value">${caseData.contextConstraints.recoveryCapacity}</span>
                </div>
              ` : ''}
              ${caseData.contextConstraints.phaseConsiderations ? `
                <div class="data-row">
                  <span class="data-label">Phase:</span>
                  <span class="data-value">${caseData.contextConstraints.phaseConsiderations}</span>
                </div>
              ` : ''}
            </div>
          </div>
        `;
      } else if (caseData.constraints) {
        // Fallback to old format
        contextHTML = `
          <div class="case-detail__section">
            <h3>Constraints</h3>
            <ul>
              ${caseData.constraints.map(c => `<li>${c}</li>`).join('')}
            </ul>
          </div>
        `;
      }

      // Key Outcomes section (new format or fallback to old)
      let outcomesHTML = '';
      if (caseData.outcomes) {
        outcomesHTML = `
          <div class="case-detail__section">
            <h3>Key Outcomes</h3>
            <div class="case-data-grid">
              ${caseData.outcomes.bodyComposition ? `
                <div class="data-row">
                  <span class="data-label">Body composition:</span>
                  <span class="data-value">${caseData.outcomes.bodyComposition}</span>
                </div>
              ` : ''}
              ${caseData.outcomes.strength ? `
                <div class="data-row">
                  <span class="data-label">Strength:</span>
                  <span class="data-value">${caseData.outcomes.strength}</span>
                </div>
              ` : ''}
              ${caseData.outcomes.hypertrophy ? `
                <div class="data-row">
                  <span class="data-label">Hypertrophy:</span>
                  <span class="data-value">${caseData.outcomes.hypertrophy}</span>
                </div>
              ` : ''}
              ${caseData.outcomes.adherence ? `
                <div class="data-row">
                  <span class="data-label">Adherence:</span>
                  <span class="data-value">${caseData.outcomes.adherence}</span>
                </div>
              ` : ''}
            </div>
          </div>
        `;
      } else if (caseData.changes) {
        // Fallback to old format
        outcomesHTML = `
          <div class="case-detail__section">
            <h3>Observed Changes</h3>
            <ul>
              ${caseData.changes.map(c => `<li>${c}</li>`).join('')}
            </ul>
          </div>
        `;
      }

      // Performance & Adaptation section (new format only)
      let performanceHTML = '';
      if (caseData.performance) {
        performanceHTML = `
          <div class="case-detail__section">
            <h3>Performance & Adaptation</h3>
            <div class="case-data-grid">
              ${caseData.performance.strengthTrend ? `
                <div class="data-row">
                  <span class="data-label">Strength trend:</span>
                  <span class="data-value">${caseData.performance.strengthTrend}</span>
                </div>
              ` : ''}
              ${caseData.performance.volumeTolerance ? `
                <div class="data-row">
                  <span class="data-label">Volume tolerance:</span>
                  <span class="data-value">${caseData.performance.volumeTolerance}</span>
                </div>
              ` : ''}
              ${caseData.performance.recoveryMarkers ? `
                <div class="data-row">
                  <span class="data-label">Recovery markers:</span>
                  <span class="data-value">${caseData.performance.recoveryMarkers}</span>
                </div>
              ` : ''}
              ${caseData.performance.fatigueManagement ? `
                <div class="data-row">
                  <span class="data-label">Fatigue management:</span>
                  <span class="data-value">${caseData.performance.fatigueManagement}</span>
                </div>
              ` : ''}
            </div>
          </div>
        `;
      }

      // Program Notes section (new format only)
      let programNotesHTML = '';
      if (caseData.programNotes) {
        programNotesHTML = `
          <div class="case-detail__section case-detail__section--notes">
            <h3>Program Notes</h3>
            <p class="program-note">${caseData.programNotes}</p>
          </div>
        `;
      }

      // Background section (new format only, appears below photos)
      let backgroundHTML = '';
      if (caseData.background) {
        backgroundHTML = `
          <div class="case-detail__background">
            <h3>Background & Summary</h3>
            <div class="background-text">${caseData.background.replace(/\n\n/g, '</p><p>').replace(/^/, '<p>').replace(/$/, '</p>')}</div>
          </div>
        `;
      }

      body.innerHTML = `
        <div class="case-detail">
          <div class="case-detail__images">
            <div class="case-detail__image-pair">
              <img src="${caseData.beforeImage}" alt="Before">
              <img src="${caseData.afterImage}" alt="After">
            </div>
            ${backgroundHTML}
          </div>
          <div class="case-detail__content">
            <h2 class="case-detail__id">${caseData.id}</h2>
            <div class="case-detail__metadata">
              ${metadataHTML}
            </div>
            ${caseData.tags && caseData.tags.length > 0 ? `
              <div class="case-detail__tags">
                ${caseData.tags.map(tag => `<span class="case-tag" data-tag="${tag}">${tag}</span>`).join('')}
              </div>
            ` : ''}
            ${contextHTML}
            ${outcomesHTML}
            ${performanceHTML}
            ${programNotesHTML}
            <div class="case-detail__report-link">
              <a href="case-report.html?case=${caseData.slug}" class="case-report-btn">
                View Full Report →
              </a>
            </div>
            <div class="case-detail__disclaimer">
              <p>Individual case. Variables including adherence, baseline fitness, nutrition environment, and biological factors influence outcomes. Not a guarantee of results.</p>
            </div>
          </div>
        </div>
      `;

      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Add click handlers for tags
      document.querySelectorAll('.case-tag').forEach(tagEl => {
        tagEl.addEventListener('click', (e) => {
          const tag = e.target.dataset.tag;
          closeModal();
          filterByTag(tag);
        });
      });
    }

    // Close modal
    function closeModal() {
      const modal = document.getElementById('caseModal');
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    // Filter by tag (called from tag click in modal)
    function filterByTag(tag) {
      if (!activeFilters.searchTags.includes(tag)) {
        activeFilters.searchTags.push(tag);
        updateTagSearchUI();
        renderCases();
      }
    }

    // Update tag search UI
    function updateTagSearchUI() {
      const tagSearchContainer = document.getElementById('activeTagsContainer');
      if (activeFilters.searchTags.length === 0) {
        tagSearchContainer.innerHTML = '<span class="no-tags-message">Click tags in case modals to filter</span>';
      } else {
        tagSearchContainer.innerHTML = activeFilters.searchTags.map(tag => `
          <span class="active-tag">
            ${tag}
            <button class="remove-tag-btn" data-tag="${tag}">×</button>
          </span>
        `).join('');
        
        // Add remove handlers
        document.querySelectorAll('.remove-tag-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const tag = e.target.dataset.tag;
            activeFilters.searchTags = activeFilters.searchTags.filter(t => t !== tag);
            updateTagSearchUI();
            renderCases();
          });
        });
      }
    }

    // Filter handlers
    document.querySelectorAll('[data-filter]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const filter = e.target.dataset.filter;
        activeFilters.focus = filter;
        
        // Update active state
        e.target.parentElement.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        e.target.classList.add('active');
        
        renderCases();
      });
    });

    document.querySelectorAll('[data-filter-duration]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const filter = e.target.dataset.filterDuration;
        activeFilters.duration = filter;
        
        // Update active state
        e.target.parentElement.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        e.target.classList.add('active');
        
        renderCases();
      });
    });

    // Modal close handlers
    document.querySelector('.case-modal__close').addEventListener('click', closeModal);
    document.querySelector('.case-modal__overlay').addEventListener('click', closeModal);

    // Keyboard close
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });

    // Initial render
    renderCases();
    updateTagSearchUI();
  </script>

</body>
</html>

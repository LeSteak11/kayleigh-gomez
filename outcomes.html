<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Observed training outcomes archive — Documented cases from applied fitness systems work.">
  <title>Observed Outcomes — Kayleigh Gomez</title>
  
  <!-- Google Fonts: Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  
  <!-- Stylesheet -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- ========== Header / Navigation ========== -->
  <header class="header">
    <nav class="nav container">
      <a href="index.html" class="nav__link">Home</a>
      <a href="work.html" class="nav__link">Work</a>
      <!-- <a href="shop.html" class="nav__link">Shop</a> -->
      <a href="about.html" class="nav__link">About</a>
      <a href="outcomes.html" class="nav__link nav__link--active">Outcomes</a>
    </nav>
  </header>

  <!-- ========== Main Content ========== -->
  <main class="main">
    <div class="outcomes-page">

      <!-- Page Header -->
      <header class="outcomes-header">
        <h1 class="outcomes-header__title">Observed Training Outcomes</h1>
        <p class="outcomes-header__subtitle">
          Archive View — Client-Shared Cases (2022–2025)
        </p>
      </header>

      <!-- Framing Block -->
      <section class="outcomes-framing">
        <p>
          This archive presents selected examples from women who participated in structured online training programs I’ve designed and coached.

The cases are shared to illustrate how different training systems are experienced over time, with a focus on consistency, adaptation, and real-world application.

Each entry reflects an individual training context and highlights broader patterns observed across online coaching environments.
      </section>

      <!-- Filters -->
      <div class="outcomes-filters">
        <div class="filter-group">
          <label class="filter-label">System Focus</label>
          <div class="filter-options">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="strength">Strength</button>
            <button class="filter-btn" data-filter="consistency">Consistency</button>
            <button class="filter-btn" data-filter="cycle-aware">Cycle-Aware</button>
            <button class="filter-btn" data-filter="hybrid">Hybrid</button>
          </div>
        </div>
        <div class="filter-group">
          <label class="filter-label">Duration</label>
          <div class="filter-options">
            <button class="filter-btn active" data-filter-duration="all">All</button>
            <button class="filter-btn" data-filter-duration="8-12">8-12 weeks</button>
            <button class="filter-btn" data-filter-duration="12-16">12-16 weeks</button>
            <button class="filter-btn" data-filter-duration="16+">16+ weeks</button>
          </div>
        </div>
      </div>

      <!-- Case Grid -->
      <div class="outcomes-grid" id="casesGrid">
        <!-- Cases will be populated by JavaScript -->
      </div>

      <!-- Consent Disclaimer -->
      <div class="outcomes-consent">
        <p>All individuals shown have provided consent for their images and anonymized training details to be shared.</p>
      </div>

    </div>
  </main>

  <!-- Case Detail Modal -->
  <div class="case-modal" id="caseModal">
    <div class="case-modal__overlay"></div>
    <div class="case-modal__content">
      <button class="case-modal__close" aria-label="Close">&times;</button>
      <div class="case-modal__body" id="modalBody">
        <!-- Content populated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- ========== Footer ========== -->
  <footer class="footer">
    <div class="container">
      <p class="footer__copyright">&copy; 2025 Kayleigh Gomez</p>
      <p class="footer__disclaimer">Educational content only. This is not medical advice.</p>
    </div>
  </footer>

  <!-- ========== Case Data & Scripts ========== -->
  <script type="module">
    // Import case data from case-loader
    import { getAllCases } from './cases/case-loader.js';
    
    // Get all consented cases and transform to display format
    const allCasesData = getAllCases();
    console.log('Loaded cases:', allCasesData);
    const cases = allCasesData.map(c => ({
      id: c.id,
      slug: c.slug,
      focus: c.metadata.systemFocus,
      duration: c.metadata.durationWeeks,
      ageRange: c.metadata.ageRange,
      constraints: c.constraints,
      changes: c.observedChanges,
      beforeImage: c.images.before,
      afterImage: c.images.after
    }));
    console.log('Transformed cases:', cases);

    // Filter state
    let activeFilters = {
      focus: 'all',
      duration: 'all'
    };

    // Render cases
    function renderCases() {
      const grid = document.getElementById('casesGrid');
      const filtered = cases.filter(c => {
        const focusMatch = activeFilters.focus === 'all' || c.focus === activeFilters.focus;
        const durationMatch = activeFilters.duration === 'all' || 
          (activeFilters.duration === '8-12' && c.duration >= 8 && c.duration <= 12) ||
          (activeFilters.duration === '12-16' && c.duration > 12 && c.duration <= 16) ||
          (activeFilters.duration === '16+' && c.duration > 16);
        return focusMatch && durationMatch;
      });

      grid.innerHTML = filtered.map(c => `
        <article class="case-card" data-case-id="${c.id}">
          <div class="case-card__images">
            <img src="${c.beforeImage}" alt="Before" loading="lazy">
            <img src="${c.afterImage}" alt="After" loading="lazy">
          </div>
          <div class="case-card__meta">
            <div class="case-card__id">${c.id}</div>
            <div class="case-card__details">
              <span>${c.duration} weeks</span>
              <span>${c.focus.replace('-', ' ')}</span>
              <span>Age ${c.ageRange}</span>
            </div>
          </div>
        </article>
      `).join('');

      // Add click handlers
      document.querySelectorAll('.case-card').forEach(card => {
        card.addEventListener('click', () => {
          const caseId = card.dataset.caseId;
          openModal(caseId);
        });
      });
    }

    // Open modal
    function openModal(caseId) {
      const caseData = cases.find(c => c.id === caseId);
      const modal = document.getElementById('caseModal');
      const body = document.getElementById('modalBody');

      body.innerHTML = `
        <div class="case-detail">
          <div class="case-detail__images">
            <div class="case-detail__image-pair">
              <img src="${caseData.beforeImage}" alt="Before">
              <img src="${caseData.afterImage}" alt="After">
            </div>
          </div>
          <div class="case-detail__content">
            <h2 class="case-detail__id">${caseData.id}</h2>
            <div class="case-detail__metadata">
              <div class="metadata-item">
                <span class="metadata-label">Duration</span>
                <span class="metadata-value">${caseData.duration} weeks</span>
              </div>
              <div class="metadata-item">
                <span class="metadata-label">System Focus</span>
                <span class="metadata-value">${caseData.focus.replace('-', ' ')}</span>
              </div>
              <div class="metadata-item">
                <span class="metadata-label">Age Range</span>
                <span class="metadata-value">${caseData.ageRange}</span>
              </div>
            </div>
            <div class="case-detail__section">
              <h3>Constraints</h3>
              <ul>
                ${caseData.constraints.map(c => `<li>${c}</li>`).join('')}
              </ul>
            </div>
            <div class="case-detail__section">
              <h3>Observed Changes</h3>
              <ul>
                ${caseData.changes.map(c => `<li>${c}</li>`).join('')}
              </ul>
            </div>
            <div class="case-detail__report-link">
              <a href="case-report.html?case=${caseData.slug}" class="case-report-btn">
                View Full Report →
              </a>
            </div>
            <div class="case-detail__disclaimer">
              <p>Individual case. Variables including adherence, baseline fitness, nutrition environment, and biological factors influence outcomes. Not a guarantee of results.</p>
            </div>
          </div>
        </div>
      `;

      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    // Close modal
    function closeModal() {
      const modal = document.getElementById('caseModal');
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    // Filter handlers
    document.querySelectorAll('[data-filter]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const filter = e.target.dataset.filter;
        activeFilters.focus = filter;
        
        // Update active state
        e.target.parentElement.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        e.target.classList.add('active');
        
        renderCases();
      });
    });

    document.querySelectorAll('[data-filter-duration]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const filter = e.target.dataset.filterDuration;
        activeFilters.duration = filter;
        
        // Update active state
        e.target.parentElement.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        e.target.classList.add('active');
        
        renderCases();
      });
    });

    // Modal close handlers
    document.querySelector('.case-modal__close').addEventListener('click', closeModal);
    document.querySelector('.case-modal__overlay').addEventListener('click', closeModal);

    // Keyboard close
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });

    // Initial render
    renderCases();
  </script>

</body>
</html>
